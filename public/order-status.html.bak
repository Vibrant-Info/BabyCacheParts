<div ng-include="'header.html'"></div>
		
		<div id="content" ng-controller="orderhistoryCtrl">
				<div id="content-header">
					<h1>Order History</h1>				
				</div>
				<div id="breadcrumb">
					<a href="#/home" title="" class="tip-bottom" data-original-title="Go to Home"><i class="fa fa-home"></i>Home</a>
					<a href="">Orders</a>
					<a href="" class="current">Order History</a>
				</div>
				<div class="row">
					<div class="col-xs-12 col-md-4">
						<div class="widget-box basic-height">
							<div class="widget-title">
								<span class="icon">
									<i class="fa fa-align-justify"></i>									
								</span>
								<h5>Order Status</h5>
								
							</div>
							<div class="widget-content nopadding ">
								<form class="form-horizontal" method="post" action="#" name="basic_validate" id="basic_validate" novalidate="novalidate">						
                                    
                                    <div class="form-group">
                                        
                                        <div class="col-sm-9 col-md-9 col-lg-9 radio-btn-apply" ng-init="order.orstatus = 3">
                                           
                                            <input type="radio" ng-model="order.orstatus" value="3" > All Orders</br>
                                            <input type="radio" ng-model="order.orstatus" value="0"> Open Orders Only</br>
                                            <input type="radio" ng-model="order.orstatus" value="1">  Closed Orders Only</br>
                                            <input type="radio" ng-model="order.orstatus" value="2"> Cancelled Orders</br>
                                            
                                        </div>
                                    </div>
                                    
                                </form>
							</div>
                           
						</div>			
					</div>
                    
                    
                    <div class="col-xs-12 col-md-4">
						<div class="widget-box basic-height">
							<div class="widget-title">
								<span class="icon">
									<i class="fa fa-align-justify"></i>									
								</span>
								<h5>Order Date Range</h5>
								
							</div>
							<div class="widget-content nopadding">
								<form class="form-horizontal" method="post" action="#" name="basic_validate" id="basic_validate" novalidate="novalidate">						
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label">Start Date </label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                        	<input type="date"  data-date-format="dd-mm-yyyy" ng-model="order.startdate"  class="datepicker form-control input-sm" />
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label"> End Date</label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                                <input type="date"  data-date-format="dd-mm-yyyy"  ng-model="order.enddate" class="datepicker form-control input-sm" />
                                        </div>

                                    </div>
                                    
                                </form>
							</div>
                           
						</div>			
					</div>
                    
                    <div class="col-xs-12 col-md-4">
						<div class="widget-box">
							<div class="widget-title">
								<span class="icon">
									<i class="fa fa-align-justify"></i>									
								</span>
								<h5>Additional Filters</h5>
								
							</div>
							<div class="widget-content nopadding">
								<form class="form-horizontal" method="post" action="#" name="basic_validate" id="basic_validate" novalidate="novalidate">						
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label">Guest Last Name</label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                            <input type="text" class="form-control input-sm"  ng-model="order.guestlastname">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label">Associate Last Name</label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                            <input type="text" class="form-control input-sm"  ng-model="order.replastname">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label"> Sku #</label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                        	<div class="selecting-option">
                                            <ui-select ng-model="order.sku" theme="select2"  style="min-width: 100px;" ng-disabled="collectionsdisable" on-select="sknDisable()">
												<ui-select-match  placeholder="Select Collection\Style ">{{$select.selected.skn}}</ui-select-match>
												<ui-select-choices repeat="skns in sknvalues | propsFilter: {skn: $select.search}">
												  <div ng-bind-html="skns.skn | highlight: $select.search"></div>
													</ui-select-choices>
											</ui-select>
                                              </div>
                                        </div>

                                    </div>
                                    
                                    <div class="form-group">
                                        <label class="col-sm-3 col-md-3 col-lg-3 control-label">Order Number</label>
                                        <div class="col-sm-9 col-md-9 col-lg-9">
                                            <input type="text" class="form-control input-sm" ng-model="order.ornumber">
                                        </div>
                                    </div>
                                    
                                </form>
							</div>
                           
						</div>			
					</div>
                    <div class="col-md-12 col-xs-1">
                    	<div class="form-actions col-md-12 btn-align-bottom">
                        	<div class="widget-content nopadding">
								<form class="form-horizontal" name="basic_validate" id="basic_validate" novalidate="novalidate">						
									<input type="submit" value="Search Order History" class="btn btn-primary" ng-click="searchorder()">  
									<input type="submit" value="Reset" class="btn btn-primary" ng-click="resetOrder()">
                            	</form>
                                </div>
                        </div>
                    </div>
                    
                    
				</div>
				<div class="row">
                	<div class="col-lg-12">
                    	<div class="table-responsive">
										<table class="table table-bordered table-striped table-hover data-table">
										<thead>
											<tr>
												<th>
													 Cancel
												</th>
												
												<th>
													 Details
												</th>
                                                
												<th>
													 Order Status
												</th>
                                                <th>
													 Order Number
												</th>
                                                <th>
													 Order Date
												</th>
                                                <th>
													 Shipping Information
												</th>
                                                <th>
													 Order Qty
												</th>
												
												
											</tr>
										</thead>
										<tbody>
											<tr ng-repeat="orders in orvalues" ng-show="valuesshow">
												
												<td><button class="btn btn-default" ng-click="cancelOrder(orders.orderid)" ng-disabled="orders.status==1 || orders.status==2">Cancel</button></td>
												<td><button class="btn btn-default" ng-click="orderDetails(orders)">Details</button></td>
												<td ng-if="orders.status==0">Open</td>
												<td ng-if="orders.status==1">Closed</td>
												<td ng-if="orders.status==2">Cancelled</td>
												<td>{{orders.orderid}}</td>
												<td>{{orders.createddate | date: "MMM dd,yyyy"}}</td>
												<td ng-if="orders.shippingdetail==0">Ship to Store</td>
												<td ng-if="orders.shippingdetail==1">Ship to Store for Guest</td>
												<td ng-if="orders.shippingdetail==2">Ship Directly to Guest</td>
												<td>{{orders.quantity}}</td>
										   </tr>
										   <tr ng-show="valuesnull"><td colspan="12"> No data found</td></tr>
										</tbody>
										</table>
									</div>
                    </div>
                    
                </div>
				<script type="text/ng-template" id="orderdetails.html">
				<div class="modal-header">
					<h3 class="modal-title">Order details</h3>
				</div>
				<form class="form-horizontal"  name="updateForm" id="basic_validate" novalidate="novalidate">	
				<div class="modal-body">
					<div class="row">
						<div class="row" ng-show="successshow">
							<div class="col-md-12">
								<div class="alert alert-success text-center" >Saved successfully</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-sm-3 col-md-3 col-lg-3 control-label" > Order no : </label>
								<div class="col-sm-9 col-md-9 col-lg-9">
								{{editOrder.orderid}}
								</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 col-md-3 col-lg-3 control-label">Order Date : </label>
								<div class="col-sm-9 col-md-9 col-lg-9">
									{{editOrder.createddate | date: "MMM dd,yyyy"}}
								</div>
							</div>
							<div class="form-group">
									<label class="col-sm-3 col-md-3 col-lg-3 control-label"> Order status :</label>
									<div class="col-sm-9 col-md-9 col-lg-9">
										<div class="selecting-option">
											<ui-select ng-model="oredit.orstatus" theme="select2"  style="min-width: 100px;"  >
												<ui-select-match  placeholder="Select status ">{{$select.selected.name}}</ui-select-match>
												<ui-select-choices repeat="edstatus in editStatus | propsFilter: {name: $select.search}">
												  <div ng-bind-html="edstatus.name | highlight: $select.search" ></div>
													</ui-select-choices>
											</ui-select>
										 </div>
									</div>
							</div>
							<div class="form-group">
								<label class="col-sm-3 col-md-3 col-lg-3 control-label">Store Address :</label>
								<div class="col-sm-9 col-md-9 col-lg-9">
								{{editOrder.storeaddress}},{{editOrder.storestate}},{{editOrder.storecountry}},{{editOrder.storezipcode}}
								</div>
							</div>
							 <div class="form-group">
								<label class="col-sm-3 col-md-3 col-lg-3 control-label"> Store Phone :</label>
								<div class="col-sm-9 col-md-9 col-lg-9">
								 {{editOrder.storephone}} 
								  </div>
								</div>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="table-responsive">
									<form name="shipform">
											<table class="table table-bordered table-striped table-hover data-table">
												<thead>
														<tr>
															<th>
																SKN No
															</th>
															
															<th>
																Part No
															</th>
															<th>
																Part Name
															</th>
															<th>
																Problem type
															</th>
															<th>
																Quantity
															</th>
															<th>
																Quantity Shipped
															</th>
															<th>
																Shipping info
															</th>
														</tr>
													</thead>
													<tbody>
													<tr ng-repeat="parts in partvalues">
														
															<td>{{parts.skn}}</td>
															<td>{{parts.code}}</td>
															<td>{{parts.partname}}</td>
															<td>{{parts.problemname}}</td>
															<td>{{parts.quantity}}</td>
															<td><input type="text" ng-model="orp.shipping[$index+1]" name="shipquan" class="form-control"  ng-blur="saveorder(orp.shipping[$index+1],parts.orderdetailid)" ><span  ng-show="shipform.shipquan.$error.pattern" style="color:red">Please enter valid quantity</span> </td>
															<td>{{parts.shipname}}</td>
															
														</tr>
													</tbody>
												</table>
											</form>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 col-md-3 col-lg-3 control-label"> Guest name :</label>
									<div class="col-sm-9 col-md-9 col-lg-9">
									 {{editOrder.guestfirstname}} {{editOrder.guestlastname}}
									  </div>
								</div>
								<div class="form-group">
									<label class="col-sm-3 col-md-3 col-lg-3 control-label"> Guest phone :</label>
									<div class="col-sm-9 col-md-9 col-lg-9">
										{{editOrder.phone}} 
									  </div>
									</div>
									<div class="form-group">
										<label class="col-sm-3 col-md-3 col-lg-3 control-label">Shipping To :</label>
										<div class="col-sm-9 col-md-9 col-lg-9" ng-if="editOrder.shippingdetail==0">
											Send to store 
										</div>
										<div class="col-sm-9 col-md-9 col-lg-9" ng-if="editOrder.shippingdetail==1">
											Send to store for guest
										</div>
										<div class="col-sm-9 col-md-9 col-lg-9" ng-if="editOrder.shippingdetail==2">
											Send to directly to guest
										</div>
									</div>
								<div class="form-group">
									<label class="col-sm-3 col-md-3 col-lg-3 control-label">Store Associate :</label>
									<div class="col-sm-9 col-md-9 col-lg-9">
										{{editOrder.repfirstname}} {{editOrder.replastname}} 										
									</div>
								</div>
								 
									<div class="form-group">
									<label class="col-sm-3 col-md-3 col-lg-3 control-label">Shipping Address :</label>
									<div class="col-sm-9 col-md-9 col-lg-9">
									 {{editOrder.address}},{{editOrder.state}},{{editOrder.country}},{{editOrder.zipcode}}
									  </div>
									</div> 
									
							</div>
						
							
						</div>
						<div class="row">
							<div class="col-md-12">
										<div class="table-responsive">
											<table class="table table-bordered table-striped table-hover data-table">
												<thead>
														<tr>
															<th>
																#
															</th>
															
															<th>
																 Comments
															</th>
															<th>
																 Comment By
															</th>
															<th>
																 Comment Date
															</th>
														</tr>
													</thead>
													<tbody>
														<tr ng-repeat="comment in orComments">
															<td>{{$index+1}}</td>
															<td>{{comment.comment}}</td>
															<td>{{comment.fname}} {{comment.lname}}</td>
															<td>{{comment.createdon}}</td>
														</tr>
													</tbody>
											</table>
										</div>
									</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-sm-3 col-md-3 col-lg-3 control-label"> Order Comments</label>
								<div class="col-sm-9 col-md-9 col-lg-9">
									<textarea ng-model="oredit.orcomments" ></textarea>
								</div>
							</div>
						</div>
					</div>
									
				</form>
				<div class="modal-footer">
					<button class="btn btn-primary" type="button" ng-click="saveComment()">Save order</button>
					<button class="btn btn-warning" type="button" ng-click="cancel()">Cancel</button>
				</div>
				</form>	
			</script>
				
		</div>
        </div>
		
		<div class="row">
				<div id="footer" class="col-xs-12">
					2015 © BabyCache. <span class="pull-right" style="padding-right:5px;">Powered by <a href="http://www.vibrant-info.com">Vibrant Info</a></span>
				</div>	
			</div>
		
            
         
            <script src="js/bootstrap.min.js"></script>
            <script src="js/jquery.icheck.min.js"></script>
          	<script src="js/jquery.validate.js"></script>
            <script src="js/select2.min.js"></script>
            
            
            <script src="js/bootstrap-datepicker.js"></script>
            <script src="js/jquery.nicescroll.min.js"></script>
            <script src="js/babycache.js"></script>
           
            <script src="js/fullcalendar.min.js"></script>
            
            <script src="js/bootstrap-colorpicker.js"></script> 
			
            
            
                       
           

          
           
	</body>
</html>
